#!/bin/bash

# handle my shorthand flags: '--NAME' -> '-mllvm -NAME'
while [[ $# > 0 ]]; do
  key="$1"
  shift
  case $key in
    --*)
      args="$args -mllvm ${key/--/-}"
      ;;
      
    *) # else:
      args="$args $key"
      ;;
  esac
done

exec @CMAKE_CXX_COMPILER@ -std=c++11 -Xclang -load -Xclang @GRAPPA_GEN_LOCATION@ @GRAPPA_INCLUDES@ @GRAPPA_DEFINITIONS@ -D__GRAPPA_CLANG__ @CMAKE_CXX_FLAGS_DEBUG@ $args -rdynamic @GRAPPA_LIBRARIES@ -Qunused-arguments
